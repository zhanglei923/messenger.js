<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <script src="../../dist/messenger.dist.js" ></script>
</head>
<body>level1
        <script type="text/javascript">
            messenger.subscribe('asklevel1', ()=>{
                return 'bar'
            })
            
            messenger.subscribe('askfromlevel2', (num)=>{
                var promise = new Promise((resolve, reject)=>{
                    setTimeout(()=>{                        
                        resolve(num*4);
                    }, 1000)
                })
                return promise;
            })
            messenger.subscribe('askAndReceiveTwice', ()=>{
                return 'askAndReceiveTwice'
            })
        </script>
    <iframe id="frame1" src="./child-level2.html" ></iframe>

</body>
</html>
