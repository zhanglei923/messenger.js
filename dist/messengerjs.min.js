/*!
 *  
 *  Messenger.js 
 *  v0.9.2
 *  The MIT License (MIT)
 *  Copyright (c) 2013-2018 ZhangLei (zhanglei923@gmail.com)
 *  https://github.com/zhanglei923/messenger.js
 * 
 */!function(e){var n={};function t(r){if(n[r])return n[r].exports;var s=n[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,t),s.l=!0,s.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var s in e)t.d(r,s,function(n){return e[n]}.bind(null,s));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e,n,t){var r;!function(s){"use strict";function o(e,n){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t}function i(e,n,t,r,s,i){return o((a=o(o(n,e),o(r,i)))<<(u=s)|a>>>32-u,t);var a,u}function a(e,n,t,r,s,o,a){return i(n&t|~n&r,e,n,s,o,a)}function u(e,n,t,r,s,o,a){return i(n&r|t&~r,e,n,s,o,a)}function f(e,n,t,r,s,o,a){return i(n^t^r,e,n,s,o,a)}function g(e,n,t,r,s,o,a){return i(t^(n|~r),e,n,s,o,a)}function c(e,n){var t,r,s,i,c;e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;var d=1732584193,l=-271733879,v=-1732584194,p=271733878;for(t=0;t<e.length;t+=16)r=d,s=l,i=v,c=p,d=a(d,l,v,p,e[t],7,-680876936),p=a(p,d,l,v,e[t+1],12,-389564586),v=a(v,p,d,l,e[t+2],17,606105819),l=a(l,v,p,d,e[t+3],22,-1044525330),d=a(d,l,v,p,e[t+4],7,-176418897),p=a(p,d,l,v,e[t+5],12,1200080426),v=a(v,p,d,l,e[t+6],17,-1473231341),l=a(l,v,p,d,e[t+7],22,-45705983),d=a(d,l,v,p,e[t+8],7,1770035416),p=a(p,d,l,v,e[t+9],12,-1958414417),v=a(v,p,d,l,e[t+10],17,-42063),l=a(l,v,p,d,e[t+11],22,-1990404162),d=a(d,l,v,p,e[t+12],7,1804603682),p=a(p,d,l,v,e[t+13],12,-40341101),v=a(v,p,d,l,e[t+14],17,-1502002290),d=u(d,l=a(l,v,p,d,e[t+15],22,1236535329),v,p,e[t+1],5,-165796510),p=u(p,d,l,v,e[t+6],9,-1069501632),v=u(v,p,d,l,e[t+11],14,643717713),l=u(l,v,p,d,e[t],20,-373897302),d=u(d,l,v,p,e[t+5],5,-701558691),p=u(p,d,l,v,e[t+10],9,38016083),v=u(v,p,d,l,e[t+15],14,-660478335),l=u(l,v,p,d,e[t+4],20,-405537848),d=u(d,l,v,p,e[t+9],5,568446438),p=u(p,d,l,v,e[t+14],9,-1019803690),v=u(v,p,d,l,e[t+3],14,-187363961),l=u(l,v,p,d,e[t+8],20,1163531501),d=u(d,l,v,p,e[t+13],5,-1444681467),p=u(p,d,l,v,e[t+2],9,-51403784),v=u(v,p,d,l,e[t+7],14,1735328473),d=f(d,l=u(l,v,p,d,e[t+12],20,-1926607734),v,p,e[t+5],4,-378558),p=f(p,d,l,v,e[t+8],11,-2022574463),v=f(v,p,d,l,e[t+11],16,1839030562),l=f(l,v,p,d,e[t+14],23,-35309556),d=f(d,l,v,p,e[t+1],4,-1530992060),p=f(p,d,l,v,e[t+4],11,1272893353),v=f(v,p,d,l,e[t+7],16,-155497632),l=f(l,v,p,d,e[t+10],23,-1094730640),d=f(d,l,v,p,e[t+13],4,681279174),p=f(p,d,l,v,e[t],11,-358537222),v=f(v,p,d,l,e[t+3],16,-722521979),l=f(l,v,p,d,e[t+6],23,76029189),d=f(d,l,v,p,e[t+9],4,-640364487),p=f(p,d,l,v,e[t+12],11,-421815835),v=f(v,p,d,l,e[t+15],16,530742520),d=g(d,l=f(l,v,p,d,e[t+2],23,-995338651),v,p,e[t],6,-198630844),p=g(p,d,l,v,e[t+7],10,1126891415),v=g(v,p,d,l,e[t+14],15,-1416354905),l=g(l,v,p,d,e[t+5],21,-57434055),d=g(d,l,v,p,e[t+12],6,1700485571),p=g(p,d,l,v,e[t+3],10,-1894986606),v=g(v,p,d,l,e[t+10],15,-1051523),l=g(l,v,p,d,e[t+1],21,-2054922799),d=g(d,l,v,p,e[t+8],6,1873313359),p=g(p,d,l,v,e[t+15],10,-30611744),v=g(v,p,d,l,e[t+6],15,-1560198380),l=g(l,v,p,d,e[t+13],21,1309151649),d=g(d,l,v,p,e[t+4],6,-145523070),p=g(p,d,l,v,e[t+11],10,-1120210379),v=g(v,p,d,l,e[t+2],15,718787259),l=g(l,v,p,d,e[t+9],21,-343485551),d=o(d,r),l=o(l,s),v=o(v,i),p=o(p,c);return[d,l,v,p]}function d(e){var n,t="",r=32*e.length;for(n=0;n<r;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}function l(e){var n,t=[];for(t[(e.length>>2)-1]=void 0,n=0;n<t.length;n+=1)t[n]=0;var r=8*e.length;for(n=0;n<r;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}function v(e){var n,t,r="";for(t=0;t<e.length;t+=1)n=e.charCodeAt(t),r+="0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n);return r}function p(e){return unescape(encodeURIComponent(e))}function m(e){return function(e){return d(c(l(e),8*e.length))}(p(e))}function h(e,n){return function(e,n){var t,r,s=l(e),o=[],i=[];for(o[15]=i[15]=void 0,s.length>16&&(s=c(s,8*e.length)),t=0;t<16;t+=1)o[t]=909522486^s[t],i[t]=1549556828^s[t];return r=c(o.concat(l(n)),512+8*n.length),d(c(i.concat(r),640))}(p(e),p(n))}function w(e,n,t){return n?t?h(n,e):v(h(n,e)):t?m(e):v(m(e))}void 0===(r=function(){return w}.call(n,t,n,e))||(e.exports=r)}()},function(e,n,t){e.exports=t(2)},function(e,n,t){"use strict";t.r(n);let r={};(()=>{let e=t(0);function n(n){let t=n.length/2,r=n.substring(0,t),s=n.substring(t),i=r.split("").reverse(),a=s.split("").reverse(),u=[].concat(i).concat(a),f=((e(""+Math.random()+new Date)+e(""+Math.random()+new Date)).split(""),(e(""+Math.random()+new Date)+e(""+Math.random()+new Date)).split(""),[]);for(var g=0;g<u.length;g++)f.push(o()+u[g]+o());return f.join("")}function s(e){let n=e.split("").reverse(),t=1,r="";for(;t;)n.shift(),(t=n.shift())&&(r+=t),n.shift();let s=r.length/2,o=r.substring(0,s),i=r.substring(s),a=o.split("");return r=i.split("").join("")+a.join("")}function o(e){var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".toUpperCase(),r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".toLowerCase(),s=t+r;return void 0!==e&&"upper"===e&&(s=t),void 0!==e&&"lower"===e&&(s=r),n+=s.charAt(Math.floor(Math.random()*s.length))}function i(){return e="",e+="0123456789".charAt(Math.floor(Math.random()*"0123456789".length));var e}var a=e(new Date+"");let u=e=>{let t=e.split("");var r=(t=t.reverse()).join("");return r=n(r+="z"),r=a+r},f=e=>{if(0!==e.indexOf(a))return e;let n=(e=(e=s(e=e.substring(a.length))).substring(0,e.length-1)).split("");return(n=n.reverse()).join("")};r.encodeStr=n,r.decodeStr=s,r.encryptMessageData=function(n,t){var r=t.isResp,s=t.isReq;t.isResp&&(r=o(),n.info=`${r}`);t.isReq&&(s=i(),n.info=`${s}`);var a,f="self"===(a=t.from)?0:"child"===a?1:"parent"===a?2:void 0;n.info+=f,s&&(n.info+=t.requestPageId),r&&(n.info+=t.responsePageId);let g,c=t.responseToken,d=c.length;32===d&&(g=32),96===d&&(g=96),32===d&&(c=c+e(Math.random())+e(Math.random())),n.info+=g+c;var l=!!t.eventName,v=e(Math.random());return n.info+=(l?"1":"0")+(l?t.eventName:v),n.info=u(n.info),n},r.decryptMessageData=function(e){e.info=f(e.info);var n,t,r=(n=e.info,t=n.substring(0,1),/\b[a-zA-Z]\b/.test(t)),s=function(e){var n=e.substring(0,1);return/\b[0-9]\b/.test(n)}(e.info),o={};r&&(o.isResp=!0),s&&(o.isReq=!0),o.from=function(e,n){var t=n.substring(1,2);return"0"===t?"self":"1"===t?"child":"2"===t?"parent":void 0}(0,e.info);var i=e.info.substring(2),a=i.substring(0,32);i=i.substring(32),s&&(o.requestPageId=a),r&&(o.responsePageId=a);var u=i.substring(0,2);i=i.substring(2);var g=parseInt(u),c=i.substring(0,96);i=i.substring(96),32===g&&(c=c.substring(0,g)),o.responseToken=c;var d="1"===i.substring(0,1),l=(i=i.substring(1)).substring(0,32);return i=i.substring(32),d&&(o.eventName=l),o}})();var s=r;let o=t(0);var i={init:e=>{var n={},t=function(e){(e=e.data)&&e.messengerjs&&i(e.messengerjs)},r=(n,t)=>{for(var r=e.getTargetWindows(),o=0;o<r.length;o++){var i=r[o],a={messengerjs:{result:t}};a.messengerjs=s.encryptMessageData(a.messengerjs,{isResp:!0,from:i.from,responsePageId:e.getPageId(),responseToken:s.encodeStr(n)}),a=JSON.parse(JSON.stringify(a)),e.doPostMessage(i.win,a,"*")}},i=function(t){var o=t.args,i=s.decryptMessageData(t),a=i.eventName,u=i.responseToken,f=n[a];if(f&&t&&i.isReq){var g=f.apply(window,o);g&&"function"==typeof g.then?g.then(e=>{r(u,e)}):r(u,g)}if("parent"===i.from)for(var c=document.getElementsByTagName("iframe"),d=0;d<c.length;d++){i.from="parent";var l={messengerjs:t};l=JSON.parse(JSON.stringify(l)),e.doPostMessage(c[d].contentWindow,l,"*")}"child"===i.from&&window!==window.parent&&(i.from="child",l={messengerjs:t},l=JSON.parse(JSON.stringify(l)),e.doPostMessage(window.parent,l,"*"))};e.listen=function(e,t){e=o(e),n[e]=t},e.stopListen=function(e){e=o(e),delete n[e]},window.addEventListener?window.addEventListener("message",t):window.attachEvent&&window.attachEvent("onmessage",t)}};let a=t(0);var u={init:e=>{var n=()=>{var e=1.7*Math.random()+"-"+2.3*new Date;return a(e.replace(/\./gi,""))},t=window.parent,r={},o=""+n();e.getPageId=(()=>o),e.getTargetWindows=(()=>{var e=[];e.push({is:"self",from:"self",win:window}),window!==window.parent&&e.push({is:"parent",from:"child",win:window.parent});for(var n=document.getElementsByTagName("iframe"),t=0;t<n.length;t++)e.push({is:"child",from:"parent",win:n[t].contentWindow});return e}),e.setTarget=function(n){return(t=n).contentWindow&&(t=t.contentWindow),e},e.emit=function(){var t=arguments[0];t=a(t);for(var i=[],u=1;u<arguments.length;u++)i.push(arguments[u]);var f=""+n(),g=this.getTargetWindows();for(u=0;u<g.length;u++){var c=g[u],d={messengerjs:{args:i}};d.messengerjs=s.encryptMessageData(d.messengerjs,{eventName:t,isReq:!0,from:c.from,requestPageId:o,responseToken:f}),d=JSON.parse(JSON.stringify(d)),e.doPostMessage(c.win,d,"*")}return r[f]={receiveCount:0},{onResponse:e=>{r[f].cb=e}}};var i=e=>{if((e=e.data)&&e.messengerjs){var n=s.decryptMessageData(e.messengerjs),t=s.decodeStr(n.responseToken);e.messengerjs&&e.messengerjs.info&&n.isResp&&r[t]&&u(t,e.messengerjs)}},u=(e,n)=>{var t=n.result;let s=()=>{delete r[e]},o=++r[e].receiveCount;r[e].cb&&r[e].cb(t,{count:o,stopReceive:s})};window.addEventListener?window.addEventListener("message",i):window.attachEvent&&window.attachEvent("onmessage",i)}};let f={doPostMessage:function(e,n,t,r){if(e.postMessage){var s=n.messengerjs;delete s.isReq,delete s.isResp,delete s.from,s.isReq=void 0,s.isResp=void 0,s.from=void 0,s=JSON.parse(JSON.stringify(s));var o={};for(var i in s)"isReq"!==i&&"isResp"!==i&&"from"!==i&&(o[i]=s[i]);var a={messengerjs:o};e.postMessage(a,t,r)}}};i.init(f),u.init(f),window.messenger=f}]);